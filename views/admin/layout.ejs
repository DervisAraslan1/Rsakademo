<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= settings?.site_name || 'Mobilya Dünyası' %> Admin Paneli
  </title>
  <link rel="icon" type="image/png" href="<%= settings?.site_favicon || '/favicon.ico' %>">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.7.0/sweetalert2.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-responsive-bs5/2.5.0/responsive.bootstrap5.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-bs5/1.13.6/dataTables.bootstrap5.min.css" rel="stylesheet">
  <!-- Quill Text Editor -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">


  <style>
    :root {
      --oak-brown: #8B4513;
      --warm-cream: #F5F5DC;
      --mahogany: #C04000;
      --walnut: #6F4E37;
      --beige: #F7F3E9;
      --cedar: #D2691E;
      --pine-green: #355E3B;
      --champagne: #F7E7CE;
      --espresso: #362D1D;
      --ivory: #FFFFF0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--beige) 0%, var(--champagne) 50%, var(--warm-cream) 100%);
      min-height: 100vh;
      color: var(--espresso);
      font-size: 14px;
    }


    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .admin-header {
      background: linear-gradient(135deg, var(--oak-brown) 0%, var(--walnut) 50%, var(--espresso) 100%);
      border-radius: 15px;
      padding: 25px 35px;
      margin-bottom: 30px;
      box-shadow: 0 8px 32px rgba(139, 69, 19, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .admin-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.03) 4px);
      pointer-events: none;
    }

    .admin-logo {
      display: flex;
      align-items: center;
      gap: 15px;
      z-index: 1;
    }

    .admin-logo i {
      font-size: 2.5rem;
      color: var(--champagne);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .admin-logo h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--ivory);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .admin-nav {
      display: flex;
      gap: 15px;
      align-items: center;
      z-index: 1;
    }

    .user-info {
      color: var(--champagne);
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      margin-right: 15px;
    }

    .nav-btn {
      padding: 12px 24px;
      border: 2px solid rgba(247, 231, 206, 0.3);
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(247, 231, 206, 0.1);
      color: var(--champagne);
      backdrop-filter: blur(5px);
    }

    .nav-btn:hover {
      background: rgba(247, 231, 206, 0.2);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      color: var(--ivory);
      border-color: rgba(247, 231, 206, 0.5);
    }

    .nav-btn.btn-danger {
      background: linear-gradient(45deg, var(--mahogany), var(--cedar));
      border-color: var(--mahogany);
    }

    .nav-btn.btn-danger:hover {
      background: linear-gradient(45deg, var(--cedar), var(--mahogany));
    }

    .admin-main {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
      align-items: start;
    }

    .admin-sidebar {
      background: rgba(255, 255, 240, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(139, 69, 19, 0.1);
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
      position: sticky;
      top: 20px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .sidebar-menu li {
      margin-bottom: 8px;
    }

    .sidebar-menu a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 15px 20px;
      border-radius: 10px;
      text-decoration: none;
      color: var(--walnut);
      font-weight: 500;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .sidebar-menu a:hover {
      background: linear-gradient(135deg, var(--champagne), var(--beige));
      color: var(--espresso);
      transform: translateX(5px);
      border-color: rgba(139, 69, 19, 0.2);
    }

    .sidebar-menu a.active {
      background: linear-gradient(135deg, var(--oak-brown), var(--cedar));
      color: var(--ivory);
      border-color: var(--mahogany);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .admin-content {
      background: rgba(255, 255, 240, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(139, 69, 19, 0.1);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(139, 69, 19, 0.2);
      min-height: 600px;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(139, 69, 19, 0.1);
    }

    .content-title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--oak-brown);
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .btn-furniture {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      font-size: 14px;
    }

    .btn-primary-furniture {
      background: linear-gradient(135deg, var(--oak-brown), var(--cedar));
      color: var(--ivory);
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
    }

    .btn-primary-furniture:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
      color: var(--ivory);
    }

    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 2px solid;
    }

    .alert-success {
      background: linear-gradient(135deg, #d4edda, #c3e6cb);
      border-color: #28a745;
      color: #155724;
    }

    .alert-danger {
      background: linear-gradient(135deg, #f8d7da, #f5c6cb);
      border-color: #dc3545;
      color: #721c24;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--ivory) 0%, var(--champagne) 100%);
      border: 2px solid rgba(139, 69, 19, 0.1);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
    }

    .stat-card .icon {
      font-size: 3rem;
      color: var(--oak-brown);
      margin-bottom: 15px;
    }

    .stat-card .number {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--espresso);
      margin-bottom: 10px;
    }

    .stat-card .label {
      color: var(--walnut);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 0.9rem;
    }

    .activity-feed {
      background: rgba(247, 243, 233, 0.8);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(139, 69, 19, 0.1);
    }

    .activity-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px 0;
      border-bottom: 1px solid rgba(139, 69, 19, 0.1);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(45deg, var(--oak-brown), var(--cedar));
      color: var(--ivory);
      font-size: 0.9rem;
    }

    .activity-content {
      flex: 1;
    }

    .activity-title {
      font-weight: 600;
      color: var(--espresso);
      margin-bottom: 5px;
    }

    .activity-time {
      font-size: 0.8rem;
      color: var(--walnut);
    }

    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }

    .quick-action {
      background: linear-gradient(135deg, var(--champagne) 0%, var(--beige) 100%);
      border: 2px solid rgba(139, 69, 19, 0.2);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      color: var(--walnut);
    }

    .quick-action:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(139, 69, 19, 0.2);
      color: var(--espresso);
      text-decoration: none;
    }

    .quick-action i {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--oak-brown);
    }

    .quick-action .title {
      font-weight: 600;
      margin-bottom: 5px;
    }

    .quick-action .description {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    .furniture-table {
      background: var(--ivory);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
    }

    .furniture-table thead {
      background: linear-gradient(135deg, var(--oak-brown) 0%, var(--walnut) 100%);
    }

    .furniture-table thead th {
      border: none;
      padding: 15px 12px;
      font-weight: 600;
      color: var(--ivory);
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 1px;
    }

    .furniture-table tbody tr {
      transition: all 0.3s ease;
      border-bottom: 1px solid rgba(139, 69, 19, 0.1);
    }

    .furniture-table tbody tr:hover {
      background: linear-gradient(135deg, var(--champagne) 0%, var(--beige) 100%);
    }

    .furniture-table tbody td {
      padding: 15px 12px;
      vertical-align: middle;
      border: none;
      color: var(--espresso);
      font-weight: 500;
    }

    .product-thumb {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid rgba(139, 69, 19, 0.2);
    }

    .category-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: white;
      display: inline-block;
    }

    .status-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-active {
      background: linear-gradient(45deg, var(--pine-green), #27ae60);
      color: white;
    }

    .status-inactive {
      background: linear-gradient(45deg, #95a5a6, #7f8c8d);
      color: white;
    }

    .price {
      color: var(--cedar);
      font-size: 1.1rem;
      font-weight: 700;
    }

    .btn-group {
      display: flex;
      gap: 5px;
    }

    .btn-sm {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid;
      background: transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 12px;
    }

    .btn-outline-primary {
      border-color: var(--oak-brown);
      color: var(--oak-brown);
    }

    .btn-outline-primary:hover {
      background: var(--oak-brown);
      color: var(--ivory);
    }

    .btn-outline-danger {
      border-color: var(--mahogany);
      color: var(--mahogany);
    }

    .btn-outline-danger:hover {
      background: var(--mahogany);
      color: var(--ivory);
    }

    @media (max-width: 992px) {
      .admin-main {
        grid-template-columns: 1fr;
      }

      .admin-sidebar {
        position: static;
      }
    }

    .dataTables_wrapper .furniture-table thead th {
      background: var(--oak-brown) !important;
      color: var(--ivory) !important;
    }

    table.dataTable thead th,
    table.dataTable thead td {
      background: linear-gradient(135deg, var(--oak-brown) 0%, var(--walnut) 100%) !important;
      color: var(--ivory) !important;
      border-bottom: 2px solid var(--mahogany) !important;
    }

    /* DataTables sorting ikonları */
    table.dataTable thead .sorting:before,
    table.dataTable thead .sorting_asc:before,
    table.dataTable thead .sorting_desc:before,
    table.dataTable thead .sorting:after,
    table.dataTable thead .sorting_asc:after,
    table.dataTable thead .sorting_desc:after {
      color: var(--ivory) !important;
      opacity: 0.7;
    }

    /* DataTables Pagination Stilleri - Daha Güçlü Override */
    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item {
      border: 2px solid var(--oak-brown) !important;
      background: transparent !important;
      margin: 0 3px;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item .page-link {
      color: var(--oak-brown) !important;
      background: transparent !important;
      border: none !important;
      padding: 8px 12px;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item:hover .page-link {
      background: var(--champagne) !important;
      color: var(--espresso) !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item.active {
      background: linear-gradient(135deg, var(--oak-brown), var(--cedar)) !important;
      border-color: var(--mahogany) !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item.active .page-link {
      background: transparent !important;
      color: var(--ivory) !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item.disabled,
    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item.disabled:hover {
      background: rgba(139, 69, 19, 0.1) !important;
      border-color: rgba(139, 69, 19, 0.3) !important;
      cursor: not-allowed !important;
    }

    .dataTables_wrapper .dataTables_paginate .paginate_button.page-item.disabled .page-link {
      color: rgba(111, 78, 55, 0.5) !important;
      background: transparent !important;
    }

    .dataTables_wrapper .dataTables_info {
      color: var(--walnut) !important;
      font-weight: 500;
    }

    .dataTables_wrapper .dataTables_length select,
    .dataTables_wrapper .dataTables_filter input {
      border: 2px solid rgba(139, 69, 19, 0.2) !important;
      border-radius: 8px !important;
      padding: 8px 12px !important;
      color: var(--espresso) !important;
    }

    .dataTables_wrapper .dataTables_length select:focus,
    .dataTables_wrapper .dataTables_filter input:focus {
      outline: none !important;
      border-color: var(--oak-brown) !important;
      box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1) !important;
    }

    div.dataTables_wrapper div.dataTables_length select {
      width: 5vw !important;
      display: inline-block;
    }
  </style>
</head>

<body>
  <div class="admin-container">
    <!-- Header -->
    <header class="admin-header">
      <div class="admin-logo">
        <i class="fas fa-couch"></i>
        <h1>
          <%= settings?.site_name || 'Mobilya Dünyası' %> Admin Paneli
        </h1>
      </div>
      <div class="admin-nav">
        <span class="user-info">
          <i class="fas fa-user-circle"></i>
          Hoş geldin, <%= typeof admin !=='undefined' && admin ? admin.username : 'Admin' %>!
        </span>
        <a href="/admin/logout" class="nav-btn btn-danger">
          <i class="fas fa-sign-out-alt"></i>
          Çıkış
        </a>
      </div>
    </header>

    <!-- Main Content -->
    <main class="admin-main">
      <!-- Sidebar -->
      <aside class="admin-sidebar">
        <ul class="sidebar-menu">
          <li>
            <a href="/admin/dashboard" class="<%= (typeof currentPage !== 'undefined' && currentPage === 'dashboard') ? 'active' : '' %>">
              <i class="fas fa-tachometer-alt"></i>
              Dashboard
            </a>
          </li>
          <li>
            <a href="/admin/products" class="<%= (typeof currentPage !== 'undefined' && currentPage === 'products') ? 'active' : '' %>">
              <i class="fas fa-couch"></i>
              Ürünler
            </a>
          </li>
          <li>
            <a href="/admin/categories" class="<%= (typeof currentPage !== 'undefined' && currentPage === 'categories') ? 'active' : '' %>">
              <i class="fas fa-tags"></i>
              Kategoriler
            </a>
          </li>
          <!-- <li>
                        <a href="/admin/sliders"
                            class="<%= (typeof currentPage !== 'undefined' && currentPage === 'sliders') ? 'active' : '' %>">
                            <i class="fas fa-images"></i>
                            Slider
                        </a>
                    </li> -->
          <li>
            <a href="/admin/settings" class="<%= (typeof currentPage !== 'undefined' && currentPage === 'settings') ? 'active' : '' %>">
              <i class="fas fa-cogs"></i>
              Ayarlar
            </a>
          </li>
          <li>
            <a href="/admin/logs" class="<%= (typeof currentPage !== 'undefined' && currentPage === 'logs') ? 'active' : '' %>">
              <i class="fas fa-clipboard-list"></i>
              Loglar
            </a>
          </li>
        </ul>
      </aside>

      <!-- Content Area -->
      <section class="admin-content">
        <!-- Success/Error Messages -->
        <% if (typeof success !=='undefined' && success) { %>
        <div class="alert alert-success">
          <i class="fas fa-check-circle"></i>
          <%= success %>
        </div>
        <% } %>
        <% if (typeof error !=='undefined' && error) { %>
        <div class="alert alert-danger">
          <i class="fas fa-exclamation-circle"></i>
          <%= error %>
        </div>
        <% } %>

        <%- body %>
      </section>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert2/11.7.0/sweetalert2.all.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net/1.13.6/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-bs5/1.13.6/dataTables.bootstrap5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-responsive/2.5.0/dataTables.responsive.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-responsive-bs5/2.5.0/responsive.bootstrap5.min.js"></script>
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

  <script>
    $(document).ready(function() {
      // Initialize DataTables
      if ($('.furniture-table').length) {
        $('.furniture-table').DataTable({
          responsive: true,
          pageLength: 10,
          language: {
            "sProcessing": "İşleniyor...",
            "sLengthMenu": "Sayfada _MENU_ kayıt göster",
            "sZeroRecords": "Eşleşen kayıt bulunamadı",
            "sInfo": "_TOTAL_ kayıttan _START_ - _END_ arası gösteriliyor",
            "sInfoEmpty": "Kayıt yok",
            "sInfoFiltered": "(_MAX_ kayıt içerisinden bulunan)",
            "sSearch": "Ara:",
            "oPaginate": {
              "sFirst": "İlk",
              "sPrevious": "Önceki",
              "sNext": "Sonraki",
              "sLast": "Son"
            },
            "sEmptyTable": "Tabloda veri yok",
            "sLoadingRecords": "Yükleniyor..."
          }
        });
      }

      // Delete confirmation
      $('.btn-delete').on('click', function(e) {
        e.preventDefault();
        const form = $(this).closest('form');

        Swal.fire({
          title: 'Emin misiniz?',
          text: 'Bu öğeyi kaldırmak istediğinizden emin misiniz?',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#C04000',
          cancelButtonColor: '#6F4E37',
          confirmButtonText: 'Evet, Kaldır!',
          cancelButtonText: 'İptal'
        }).then((result) => {
          if (result.isConfirmed) {
            form.submit();
          }
        });
      });

      // Auto-hide alerts
      setTimeout(function() {
        $('.alert').fadeOut('slow');
      }, 5000);
    });
  </script>
</body>

</html>